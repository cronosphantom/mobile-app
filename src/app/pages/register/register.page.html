<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      
      <img src="assets/icon/homescreen/logo.png" class="logotop">
    </ion-title>
    
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="registerForm" (ngSubmit)="register(registerForm.value)">
  <div class="flex">
    <ion-item lines="none" [ngClass]="!registerForm.controls.email.valid && registerForm.controls.email.touched ? 'invalid' : ''">
      <ion-input formControlName="email" type="email" placeholder="Email"  (focusout)="emailExists(registerForm.controls.email.value)" required></ion-input>
    </ion-item>
    <p class="password-error" *ngIf=" registerForm.controls.email.touched &&  registerForm.controls.email.errors!=null ">
      <span *ngIf="registerForm.controls.email.errors.required">Email is required field!</span>
      <span *ngIf="registerForm.controls.email.errors.pattern">Please check your email!</span>
      <span *ngIf="registerForm.controls.email.errors.duplicate">Email already exists!</span>
    </p>
    <ion-item lines="none" [ngClass]="!registerForm.controls.userName.valid && registerForm.controls.userName.touched ? 'invalid' : ''">
      <ion-input formControlName="userName" type="userName" placeholder="User Name"  (focusout)="userNameExists(registerForm.controls.userName.value)" required></ion-input>
    </ion-item>
    <p class="password-error" *ngIf=" registerForm.controls.userName.touched &&  registerForm.controls.userName.errors!=null ">User Name Already Used.</p>
    <ion-item lines="none" [ngClass]="!registerForm.controls.mobile.valid && registerForm.controls.mobile.touched ? 'invalid' : ''">
      <ion-input formControlName="mobile" type="mobile" placeholder="mobile"  required></ion-input>
    </ion-item>
    <!--p class="password-error" *ngIf=" registerForm.controls.userName.touched &&  registerForm.controls.userName.errors!=null ">Email Already Used.</p--->
    <ion-item lines="none" class="password-item" [ngClass]="!registerForm.controls.password.valid && registerForm.controls.password.touched ? 'invalid' : ''">
      <ion-input formControlName="password" [type]="showPassword ? 'text' : 'password'" placeholder="Password" required  pattern="(?=.*\d)(?=.*[a-zA-Z]).{8,}"></ion-input>
      <ion-icon (click)="showPassword = !showPassword" [name]="showPassword ? 'eye-off' : 'eye'"></ion-icon>
    </ion-item>
    <p class="password-notice" *ngIf="registerForm.controls.password.touched && registerForm.controls.password.errors ">Password must be at least 8 characters and include at least 1 letter and number.</p>
    <ion-item lines="none" class="password-item" [ngClass]="!registerForm.controls.confirm_password.valid && registerForm.controls.confirm_password.touched ? 'invalid' : ''">
      <ion-input formControlName="confirm_password" [type]="showPassword ? 'text' : 'password'" placeholder="Confirm Password" required></ion-input>
      <ion-icon (click)="showPassword = !showPassword" [name]="showPassword ? 'eye-off' : 'eye'"></ion-icon><br>
       <!-- {{ registerForm.controls.confirm_password.errors | json }}  -->
     
    </ion-item>
    <p class="password-error" *ngIf=" registerForm.controls.confirm_password.touched && registerForm.controls.confirm_password.errors!=null">Password does not match.</p>
      <ion-button [disabled]="!registerForm.valid" expand="block" class="mb-7" type="submit" >Register</ion-button>
      <p>Already have account, please login <a routerLink="/login">here</a>.</p>
    </div>
  </form>
</ion-content>
